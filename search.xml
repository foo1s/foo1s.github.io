<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>MySQL基础</title>
      <link href="/2025/05/08/MySQL%E5%9F%BA%E7%A1%80/"/>
      <url>/2025/05/08/MySQL%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<blockquote><p>MySQL8.4安装教程<br><a href="https://blog.csdn.net/m0_65663088/article/details/140001290">Windows安装Mysql8.4,看这一篇就够了（超级详细！）_mysql8.4安装教程-CSDN博客</a></p></blockquote><h4 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- 开启操作：`net start MySQL84`</span><br><span class="line">- 关闭操作：`net stop MySQL84`（或者在计算机管理服务中进行开启关闭）</span><br><span class="line">- 显式连接：`mysql -uzhw -pzhw0401 -h&lt;&gt; -p&lt;&gt; &lt;database&gt;`</span><br><span class="line">- 隐式连接：`mysql -uzhw -p -h127.0.0.1`</span><br><span class="line">- 查看版本信息：`select version();`</span><br><span class="line">- 退出连接：`exit`</span><br><span class="line"></span><br><span class="line">- 创建新的用户：CREATE USER &#x27;用户名&#x27;@&#x27;主机名&#x27; IDENTIFIED BY &#x27;密码&#x27;;</span><br><span class="line">- 查看用户密码：SELECT User, authentication_string FROM mysql.user WHERE User=&#x27;你的用户名&#x27;;</span><br><span class="line">- 重置密码：ALTER USER &#x27;用户名&#x27;@&#x27;主机名&#x27; IDENTIFIED BY &#x27;新密码&#x27;;</span><br><span class="line">- FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><h4 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li>一条完整的数据的存储的过程：<br>  创建库–&gt;定字段–&gt;创建表–&gt;插数据</li></ul><h4 id="SQL语句命名的规定与规范"><a href="#SQL语句命名的规定与规范" class="headerlink" title="SQL语句命名的规定与规范"></a>SQL语句命名的规定与规范</h4><h5 id="标识符命名规定"><a href="#标识符命名规定" class="headerlink" title="标识符命名规定"></a>标识符命名规定</h5><ul><li>数据库名、表名不得超过30个字符，变量名限制为29个</li><li>必须只能包含 A–Z, a–z, 0–9, 共63个字符，而且不能数字开头</li><li>数据库名、表名、字段名等对象名中间不能包含空格</li><li>同一个MySQL软件中，数据库不能同名；同一个库中，表不能重名；同一个表中，字段不能重名<a href="https://dev.mysql.com/doc/refman/8.0/en/keywords.html">https://dev.mysql.com/doc/refman/8.0/en/keywords.html</a></li><li>必须保证你的字段没有和保留字、数据库系统或常用方法冲突。如果坚持使用，请在SQL语句中使用&#96; （着重号）引起来</li></ul><h5 id="标识符命名规范"><a href="#标识符命名规范" class="headerlink" title="标识符命名规范"></a>标识符命名规范</h5><ul><li>注释应该清晰、简洁地解释 SQL 语句的意图、功能和影响。</li><li>库、表、列名应该使用小写字母，并使用下划线（)或驼峰命名法。</li><li>库、表、字段名应该简洁明了，具有描述性，反映其所存储数据的含义。</li><li>库名应于对应的程序名一致 例如：程序名为 EcommercePlatform 数据库名命名为ecommerce_platform”</li><li>表命名最好是遵循 “业务名称_表”的作用  例如：alipay_task 、 force_project、 trade_config </li><li>列名应遵循“表实体_属性”的作用 例如：product_name 或 productName</li></ul><h4 id="MySQL所有条件操作符"><a href="#MySQL所有条件操作符" class="headerlink" title="MySQL所有条件操作符"></a>MySQL所有条件操作符</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">=</span><br><span class="line">!=</span><br><span class="line">&lt;</span><br><span class="line">&lt;=</span><br><span class="line">&gt;</span><br><span class="line">&gt;=</span><br><span class="line">between</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> DataBase </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL基础</title>
      <link href="/2025/05/08/DDL%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/"/>
      <url>/2025/05/08/DDL%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>DDL语言主要用于定义和管理数据库的结构，包括库，表，索引，视图等数据库对象的创建与修改<br>不涉及对数据的操作，而是更关注于数据库的结构与元数据</p><h3 id="DDL常用操作"><a href="#DDL常用操作" class="headerlink" title="DDL常用操作"></a>DDL常用操作</h3><h4 id="DDL常用语言"><a href="#DDL常用语言" class="headerlink" title="DDL常用语言"></a>DDL常用语言</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create </span><br><span class="line"></span><br><span class="line">alter</span><br><span class="line"></span><br><span class="line">drop</span><br><span class="line"></span><br><span class="line">show databases/columns/tables from column/status/ create database/ grants/..</span><br></pre></td></tr></table></figure><h4 id="检索数据"><a href="#检索数据" class="headerlink" title="检索数据"></a>检索数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select column1,column2 from table;</span><br><span class="line"></span><br><span class="line">select * from table // 所有列</span><br><span class="line"></span><br><span class="line">select distinct column from table //去重，应用于所有列</span><br><span class="line"></span><br><span class="line">select column from table limit 5,4 //从行5开始的4行</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="排序检索数据"><a href="#排序检索数据" class="headerlink" title="排序检索数据"></a>排序检索数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">select pro_name from prroducts order by pro_name 选择一个列进行排序</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">select prod_id,prod_price,prod_xx from products order by prod_id,prod_price;</span><br><span class="line">按照多个列进行排序</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">select prod_id,prod_price,prod_xx from products order by prod_id desc; 降序</span><br><span class="line">哪个列降序就把desc放在哪个列的后面</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="过滤数据"><a href="#过滤数据" class="headerlink" title="过滤数据"></a>过滤数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">select pro_name from products where pro_price=2.5 过滤price=2.5的数值</span><br><span class="line">--&gt;注意将order by语句放在where之后</span><br><span class="line"></span><br><span class="line">select pro_name from products where pro_price between 5 and 10 ; &gt;and</span><br><span class="line"></span><br><span class="line">select cust-ID FROM coutomers WHERE cust-EMAIL IS NULL; &gt;NULL</span><br><span class="line"></span><br><span class="line">----组合where语句---</span><br><span class="line">select xx,xx,xx from xx where xx=a and xx=b  &gt;and</span><br><span class="line"></span><br><span class="line">select xx,xx,xx from xx where xx=a and xx=b  &gt;or</span><br><span class="line">and的优先级高于or,最好使用()进行合理区分</span><br><span class="line"></span><br><span class="line">select columns1, column2 from table where id in (100,200) order by xx  &gt;in</span><br><span class="line"></span><br><span class="line">select columns1, column2 from table where id  not in (100,200) order by xx  &gt;not</span><br></pre></td></tr></table></figure><h4 id="使用通配符进行过滤"><a href="#使用通配符进行过滤" class="headerlink" title="使用通配符进行过滤"></a>使用通配符进行过滤</h4><ul><li><p>为了在搜索语句中使用通配符，必须使用LIKE操作符</p></li><li><p>操作符何时不是操作符，当它作为谓词的时候</p></li><li><p>百分号<code>%</code>通配符</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select prod_id,pro_name from products wher prod_name like &#x27;jet%&#x27;;</span><br></pre></td></tr></table></figure><ul><li>注意尾空格，<code>%</code>不会匹配尾空格</li><li><code>%</code>不能匹配NULL</li></ul></li><li><p>下划线<code>_</code>通配符</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select xx from xx where pro_name like &#x27;_ &#x27;</span><br></pre></td></tr></table></figure><ul><li><code>只能匹配一个字符</code></li></ul></li></ul><h4 id="使用正则表达式进行搜索"><a href="#使用正则表达式进行搜索" class="headerlink" title="使用正则表达式进行搜索"></a>使用正则表达式进行搜索</h4><ul><li>默认不区分大小写</li></ul><h5 id="基本字符匹配"><a href="#基本字符匹配" class="headerlink" title="基本字符匹配"></a>基本字符匹配</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">select pro_name</span><br><span class="line">from products</span><br><span class="line">where pro_name REGEXP &#x27;.100&#x27;</span><br><span class="line">order by pro_name</span><br><span class="line"></span><br><span class="line">1. 进行or匹配</span><br><span class="line">REGEXP &#x27;100|200&#x27;</span><br><span class="line"></span><br><span class="line">2.匹配几个or字符</span><br><span class="line">REGEXP &#x27;[^123] ton&#x27;</span><br><span class="line">REGEXP &#x27;[1-3] ton&#x27;</span><br><span class="line"></span><br><span class="line">3.匹配特殊字符</span><br><span class="line">&#x27;\\ .&#x27;</span><br><span class="line">使用\\作为转义字符</span><br><span class="line"></span><br><span class="line">4.匹配字符类</span><br><span class="line"></span><br><span class="line">5.匹配多个实例</span><br><span class="line"></span><br><span class="line">6.定位符</span><br><span class="line">^ (插入符号)：</span><br><span class="line">将匹配限制在字符串的开头。</span><br><span class="line">例如，^abc 只匹配以 &quot;abc&quot; 开头的字符串。</span><br><span class="line"></span><br><span class="line">$ (美元符号)：</span><br><span class="line">将匹配限制在字符串的结尾。</span><br><span class="line">例如，xyz$ 只匹配以 &quot;xyz&quot; 结尾的字符串</span><br></pre></td></tr></table></figure><ul><li><code>.</code> 可以匹配任意字符</li><li><code>LIKE</code>匹配整个列，如果被匹配文本在列值中出现，则LIKE将不会找到他</li></ul><h4 id="创建计算字段"><a href="#创建计算字段" class="headerlink" title="创建计算字段"></a>创建计算字段</h4><h5 id="计算字段"><a href="#计算字段" class="headerlink" title="计算字段"></a>计算字段</h5><ul><li>计算字段是在运行时，在select()语句内部进行创建的</li></ul><h5 id="拼接字段"><a href="#拼接字段" class="headerlink" title="拼接字段"></a>拼接字段</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.MySQL:将两个列拼接起来：</span><br><span class="line">-Concat()</span><br><span class="line"></span><br><span class="line">2.一般的DBMS系统</span><br><span class="line">-使用+或者||</span><br><span class="line"></span><br><span class="line">select Concat(Rtrim(xx)),&#x27;(&#x27;,Rtrim(xx)),&#x27;)&#x27; as xxx</span><br></pre></td></tr></table></figure><h5 id="执行算数计算"><a href="#执行算数计算" class="headerlink" title="执行算数计算"></a>执行算数计算</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select id,num,price,num*price as all_price</span><br><span class="line">from orintity </span><br><span class="line">whhere origin_num = 2005;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> DataBase </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL基础</title>
      <link href="/2025/05/08/%E5%87%BD%E6%95%B0%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AD%A6%E4%B9%A0/"/>
      <url>/2025/05/08/%E5%87%BD%E6%95%B0%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h4 id="文本处理函数"><a href="#文本处理函数" class="headerlink" title="文本处理函数"></a>文本处理函数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">select name,Upper(name) AS name_case </span><br><span class="line">FROM xxx</span><br><span class="line">order by xxx;</span><br><span class="line"></span><br><span class="line">left():返回左边的字符</span><br><span class="line">length():返回长度</span><br><span class="line">Locate():找出一个字串</span><br><span class="line">Lower():将串转化为小写</span><br><span class="line">LTrim():去除串左边的空格</span><br><span class="line">Soundex():返回串的SOUNDEX值</span><br><span class="line">where Soundex(cust_contact) = Soundex(&#x27;Y Lie&#x27;);</span><br><span class="line">Substring():返回子串的字符</span><br></pre></td></tr></table></figure><h4 id="时间和日期处理函数"><a href="#时间和日期处理函数" class="headerlink" title="时间和日期处理函数"></a>时间和日期处理函数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">日期表示格式：yyyy-mm-dd</span><br><span class="line"></span><br><span class="line">1.查找特定的日期：</span><br><span class="line">where Data(Order_data) = &#x27;2005-09-01&#x27;</span><br><span class="line"></span><br><span class="line">2.查找特定月份</span><br><span class="line">- where Year(order_data) = 2005 AND Month(order_data) = 9;</span><br><span class="line">- where Data(order_data) Between &#x27;2005-09-01&#x27; and &#x27;2005-09-30</span><br></pre></td></tr></table></figure><h3 id="汇总数据"><a href="#汇总数据" class="headerlink" title="汇总数据"></a>汇总数据</h3><h4 id="常用聚集函数"><a href="#常用聚集函数" class="headerlink" title="常用聚集函数"></a>常用聚集函数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">AVG()  返回某列平均值</span><br><span class="line">COUNT() 返回某列行数</span><br><span class="line">MAX() </span><br><span class="line">MIN()</span><br><span class="line">SUM()</span><br><span class="line">DISTINCT() 不选取指定列中的重复值，只选取一次重复值</span><br></pre></td></tr></table></figure><ul><li><p>AVG()</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select AVG(xxx) as avg_price</span><br><span class="line">from products</span><br><span class="line">where id =1001</span><br></pre></td></tr></table></figure></li><li><p>COUNT()</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.COUNT(*)</span><br><span class="line">对表中所有行进行计数，无论其是否含有空值</span><br><span class="line"></span><br><span class="line">2.COUNT(column)</span><br><span class="line">对特定列中具有值得行进行计数</span><br></pre></td></tr></table></figure></li><li><p>DISTINCT()</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select AVG(DISTINCT grod_privce) AS avg_price</span><br></pre></td></tr></table></figure></li></ul><h3 id="分组数据"><a href="#分组数据" class="headerlink" title="分组数据"></a>分组数据</h3><h4 id="数据分组"><a href="#数据分组" class="headerlink" title="数据分组"></a>数据分组</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Group By</span><br><span class="line"></span><br><span class="line">select id,count(*) As num</span><br><span class="line">from products</span><br><span class="line">Group By id</span><br><span class="line">-&gt;按照每个独立的id进分组排序，并计算相应的num数值</span><br><span class="line">-&gt;使用with rollup 可以得到每个分组以分组汇总级别的数值</span><br></pre></td></tr></table></figure><ul><li>group by语句必须在where语句之后，在order by语句之前</li><li>一般在使用groupby语句时，也应该给出order by语句，保证排序的准确性</li></ul><h4 id="过滤分组"><a href="#过滤分组" class="headerlink" title="过滤分组"></a>过滤分组</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HAVING</span><br><span class="line"></span><br><span class="line">select id, COUNT(*) as num</span><br><span class="line">form product</span><br><span class="line">where price&gt;=10</span><br><span class="line">Group by id</span><br><span class="line">HAVING COUNT(*) &gt;=2;</span><br></pre></td></tr></table></figure><ul><li>能用where表示的都可以使用HAVING表示</li><li>where在分组前进行过滤，HAVING在分组后进行过滤</li></ul><h4 id="select子句顺序"><a href="#select子句顺序" class="headerlink" title="select子句顺序"></a>select子句顺序</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select-&gt;from-&gt;where-&gt;group by-&gt;HAVING-&gt;order by-&gt;LIMIT</span><br></pre></td></tr></table></figure><h3 id="使用子查询-subquery"><a href="#使用子查询-subquery" class="headerlink" title="使用子查询(subquery)"></a>使用子查询(subquery)</h3><h4 id="利用子查询进行过滤"><a href="#利用子查询进行过滤" class="headerlink" title="利用子查询进行过滤"></a>利用子查询进行过滤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT cust_id</span><br><span class="line">FROM orders</span><br><span class="line">where order_num in(select order_num</span><br><span class="line">from orderintems</span><br><span class="line">where prod_id = &#x27;TNT2&#x27;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="作为计算字段使用子查询"><a href="#作为计算字段使用子查询" class="headerlink" title="作为计算字段使用子查询"></a>作为计算字段使用子查询</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select cust_name,</span><br><span class="line">cust_state,</span><br><span class="line">(select COUNT(*)</span><br><span class="line"> from orders</span><br><span class="line"> where order.cust_id = custmer.cust_id) as orders</span><br><span class="line">from custmers</span><br><span class="line">order by cust_name;</span><br></pre></td></tr></table></figure><h3 id="创建高级联结"><a href="#创建高级联结" class="headerlink" title="创建高级联结"></a>创建高级联结</h3><h4 id="使用别表名"><a href="#使用别表名" class="headerlink" title="使用别表名"></a>使用别表名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select name,contact</span><br><span class="line">from customers as c, order as o</span><br></pre></td></tr></table></figure><h4 id="自联结"><a href="#自联结" class="headerlink" title="自联结"></a>自联结</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select p1.name, p1.id</span><br><span class="line">from products as p1, products as p2</span><br><span class="line">where p1.vend_id = p2.vend_id</span><br><span class="line">and p2.prod_id = &#x27;rrr&#x27;</span><br></pre></td></tr></table></figure><h4 id="自然联结"><a href="#自然联结" class="headerlink" title="自然联结"></a>自然联结</h4><ul><li>自然联结排除多次出现，使得每个列只返回一次</li></ul><h4 id="外部联结"><a href="#外部联结" class="headerlink" title="外部联结"></a>外部联结</h4><ul><li>联结在那些相关表中没有关联的行<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">left outer join 选择左边表格全部列</span><br><span class="line">right outer join 选择右边表格的全部列</span><br><span class="line"></span><br><span class="line">select customer.id, order.num</span><br><span class="line">from custmers Left outer join orders</span><br><span class="line">on customers.id = orders.id</span><br></pre></td></tr></table></figure></li></ul><h4 id="使用带聚合函数的联结"><a href="#使用带聚合函数的联结" class="headerlink" title="使用带聚合函数的联结"></a>使用带聚合函数的联结</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select customer.id, customer.name,</span><br><span class="line">count(order.num) as num_ord</span><br><span class="line">from custmers inner join orders</span><br><span class="line">on customers.id = orders.id</span><br><span class="line">group by custmers.id</span><br></pre></td></tr></table></figure><h3 id="组合查询"><a href="#组合查询" class="headerlink" title="组合查询"></a>组合查询</h3><ul><li>多个查询语句，并作为单个查询结果作为返回</li></ul><h4 id="创建组合查询"><a href="#创建组合查询" class="headerlink" title="创建组合查询"></a>创建组合查询</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Union</span><br><span class="line"></span><br><span class="line">select xx </span><br><span class="line">from xx</span><br><span class="line">where xx</span><br><span class="line">UNION</span><br><span class="line">select xx</span><br><span class="line">from xx</span><br><span class="line">where xx</span><br></pre></td></tr></table></figure><h4 id="UNION使用规则"><a href="#UNION使用规则" class="headerlink" title="UNION使用规则"></a>UNION使用规则</h4><ul><li>union必须由两个或者两个以上的select语句组成</li><li>union中的每个查询必须包含相同的列，表达式或者聚合函数</li><li>使用union会自动去除重复的行，可使用union all解决</li><li>使用order by进行排序的过程中，须放在组后一个select语句之后</li></ul><h3 id="全文本搜索"><a href="#全文本搜索" class="headerlink" title="全文本搜索"></a>全文本搜索</h3><h4 id="使用全文本搜索"><a href="#使用全文本搜索" class="headerlink" title="使用全文本搜索"></a>使用全文本搜索</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">1.启用全文本搜索支持</span><br><span class="line">create tabel xxx&#123;</span><br><span class="line">FULLTEXT(note_text) //指定一个note_text列</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">2.进行全文本搜索</span><br><span class="line">-where语句中进行排序</span><br><span class="line">where Match(note_text) Against(&#x27;rabbit&#x27;);</span><br><span class="line">match与fulltext需要匹配</span><br><span class="line">相比较普通排序，会给出它认为的优先排序等级</span><br><span class="line"></span><br><span class="line">-select语句中进行排序</span><br><span class="line">select note_text,</span><br><span class="line">Match(note_text) Against(&#x27;rabbit&#x27;) As ranks</span><br><span class="line"></span><br><span class="line">3.扩展排序</span><br><span class="line">where Match(note_text) Against(&#x27;rabbit&#x27;, with ouery expansion);</span><br><span class="line"></span><br><span class="line">4.布尔文本搜索</span><br><span class="line">- 即使没有fulltext索引也可以使用</span><br><span class="line">- where Match(note_text) Against(&#x27;rabbit&#x27;，in boolean mode);</span><br><span class="line"></span><br><span class="line">5.常用的布尔操作符与注意事项</span><br></pre></td></tr></table></figure><h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><h4 id="数据插入"><a href="#数据插入" class="headerlink" title="数据插入"></a>数据插入</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert</span><br></pre></td></tr></table></figure><h4 id="插入完整的行"><a href="#插入完整的行" class="headerlink" title="插入完整的行"></a>插入完整的行</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1.直接插入value值(不安全)</span><br><span class="line">insert into cust</span><br><span class="line">values(null,</span><br><span class="line">xx</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">2.先列出key值再插入(安全)</span><br><span class="line">insert into cust(cust_name,</span><br><span class="line">cust_address,</span><br><span class="line">xx,</span><br><span class="line">xx</span><br><span class="line">)</span><br><span class="line">values(</span><br><span class="line">&#x27;zxz&#x27;,</span><br><span class="line">&#x27;xx&#x27;</span><br><span class="line">);</span><br><span class="line">cust_id的NULL值是不需要的</span><br></pre></td></tr></table></figure><ul><li>第一列的id列一般可以自动补全</li></ul><h4 id="插入多个行"><a href="#插入多个行" class="headerlink" title="插入多个行"></a>插入多个行</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">insert into cust(cust_name,</span><br><span class="line">cust_address,</span><br><span class="line">xx,</span><br><span class="line">xx</span><br><span class="line">)</span><br><span class="line">values(</span><br><span class="line">&#x27;zxz&#x27;,</span><br><span class="line">&#x27;xx&#x27;</span><br><span class="line">)</span><br><span class="line">values(</span><br><span class="line">&#x27;zxz&#x27;,</span><br><span class="line">&#x27;xx&#x27;</span><br><span class="line">)；</span><br></pre></td></tr></table></figure><ul><li>提升整体性能：<code>insert low priority into</code></li></ul><h4 id="插入检索出的数据"><a href="#插入检索出的数据" class="headerlink" title="插入检索出的数据"></a>插入检索出的数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">insert into cust(cust_name,</span><br><span class="line">cust_address,</span><br><span class="line">xx,</span><br><span class="line">xx</span><br><span class="line">)</span><br><span class="line">select cust_id</span><br><span class="line">xxx,</span><br><span class="line">xxx,</span><br><span class="line">from cust2;</span><br></pre></td></tr></table></figure><ul><li>列名不需要匹配</li></ul><h3 id="更新与删除数据"><a href="#更新与删除数据" class="headerlink" title="更新与删除数据"></a>更新与删除数据</h3><ul><li>更新与删除数据的过程均不要忘记使用where语句</li></ul><h4 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h4><p>删除指定列的某一行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">update table</span><br><span class="line">set email = &#x27;&#x27;</span><br><span class="line">name = &#x27;null&#x27; 若设置为null可视为删除</span><br><span class="line">where id = &#x27;&#x27;</span><br></pre></td></tr></table></figure><h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><ul><li>删除指定的行</li><li>仅删除表的内容，而不会删除表</li><li>若想要删除整个表格，可以使用<code>truncate table</code><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">delete from cust</span><br><span class="line">where id = &#x27;&#x27;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> DataBase </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL基础</title>
      <link href="/2025/05/08/%E8%A1%A8%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/05/08/%E8%A1%A8%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><h4 id="创建表基础"><a href="#创建表基础" class="headerlink" title="创建表基础"></a>创建表基础</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table table1</span><br><span class="line">(</span><br><span class="line">id int not null Auto_increment</span><br><span class="line">name char(50) not null</span><br><span class="line">money int nor null default 1</span><br><span class="line">primary key(id)</span><br><span class="line">)</span><br><span class="line">Engine=InnoDB</span><br></pre></td></tr></table></figure><h4 id="关于null值"><a href="#关于null值" class="headerlink" title="关于null值"></a>关于null值</h4><ul><li>null值就是没有值或者缺值，允许null值的列，允许再插入时不给出值</li><li><code>&#39; &#39;</code>不是null值</li><li>主键只能使用<code>not null</code></li></ul><h4 id="关于AUTO-INCREMENT"><a href="#关于AUTO-INCREMENT" class="headerlink" title="关于AUTO_INCREMENT"></a>关于AUTO_INCREMENT</h4><ul><li>每个表只允许一个AUTO_INCREMENT列</li><li>使用<code>select last_insert_id()</code>来确定最后一个AUTO_INCREMENT值</li></ul><h4 id="引擎类型"><a href="#引擎类型" class="headerlink" title="引擎类型"></a>引擎类型</h4><ul><li>InnoDB<br>可靠的事物处理引擎，不支持全文搜索</li><li>MEMORY<br>数据存储在内存，速度很快，适用于临时表</li><li>MyISAm<br>性能极高的引擎，支持全文本搜索</li><li><strong>外键不能跨引擎</strong></li></ul><h4 id="更新表"><a href="#更新表" class="headerlink" title="更新表"></a>更新表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE vendos</span><br><span class="line">ADD vend_phone CHAR(20)</span><br><span class="line"></span><br><span class="line">ALTER TABLE vendos</span><br><span class="line">DROP COLUMN vend_phone</span><br></pre></td></tr></table></figure><h4 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Drop table table1</span><br></pre></td></tr></table></figure><h4 id="重命名表"><a href="#重命名表" class="headerlink" title="重命名表"></a>重命名表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename table1 to table2</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> DataBase </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL基础</title>
      <link href="/2025/05/08/MySQL%E9%AB%98%E7%BA%A7%E8%AF%AD%E8%A8%80%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/05/08/MySQL%E9%AB%98%E7%BA%A7%E8%AF%AD%E8%A8%80%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><ul><li>视图是<strong>虚拟的表</strong>，在select层面简化检索数据的查询操作</li><li>每次使用视图时，都必须处理查询执行时所需的任一检索</li></ul><h3 id="使用视图"><a href="#使用视图" class="headerlink" title="使用视图"></a>使用视图</h3><h4 id="视图基本语法"><a href="#视图基本语法" class="headerlink" title="视图基本语法"></a>视图基本语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create view</span><br><span class="line"></span><br><span class="line">show create view viewname</span><br><span class="line"></span><br><span class="line">drop </span><br></pre></td></tr></table></figure><h4 id="利用视图简化复杂的联结"><a href="#利用视图简化复杂的联结" class="headerlink" title="利用视图简化复杂的联结"></a>利用视图简化复杂的联结</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create view product as</span><br><span class="line">select xx,xx,xx</span><br><span class="line">from table1,table2,table3</span><br><span class="line">where table1.id = table2.num</span><br><span class="line">  table1.num = table3.num</span><br></pre></td></tr></table></figure><h4 id="利用视图重新格式化检索出的数据"><a href="#利用视图重新格式化检索出的数据" class="headerlink" title="利用视图重新格式化检索出的数据"></a>利用视图重新格式化检索出的数据</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">#### 利用视图过滤不想要的数据</span><br><span class="line">```MySQL</span><br></pre></td></tr></table></figure><h4 id="使用视图与计算字段"><a href="#使用视图与计算字段" class="headerlink" title="使用视图与计算字段"></a>使用视图与计算字段</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">#### 更新视图</span><br><span class="line">```MySQL</span><br></pre></td></tr></table></figure><ul><li>如果MySQl不能准确的确定被更新数据的基数据，则不允许更新（包括插入与删除）</li><li>一般情况下将试图用于检索而不是更新</li></ul><h3 id="使用存储过程"><a href="#使用存储过程" class="headerlink" title="使用存储过程"></a>使用存储过程</h3><h4 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h4><ul><li>存储过程的好处：简单，安全，高性能</li></ul><h4 id="使用存储过程-1"><a href="#使用存储过程-1" class="headerlink" title="使用存储过程"></a>使用存储过程</h4><h5 id="执行存储过程"><a href="#执行存储过程" class="headerlink" title="执行存储过程"></a>执行存储过程</h5><ul><li>CALL接受存储过程中的名字以及需要传递给它的任一参数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">call product(</span><br><span class="line">@xxx</span><br><span class="line">@xxx</span><br><span class="line">@xxx</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li></ul><h5 id="创建存储过程"><a href="#创建存储过程" class="headerlink" title="创建存储过程"></a>创建存储过程</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1.简单示例</span><br><span class="line">create PROCEDURE AS priceaverage</span><br><span class="line">BEGIN</span><br><span class="line"> SELECT AVG(privce) AS priceverge</span><br><span class="line"> FROM products</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line">2.mysql命令行客户机的分隔符</span><br><span class="line">DELIMITER // </span><br><span class="line">为了解释存储过程内部的;字符</span><br><span class="line">除了\符号为外，任何字符均可以</span><br><span class="line"></span><br><span class="line">3.使用此存储过程</span><br><span class="line">call priceaverage();</span><br></pre></td></tr></table></figure><h5 id="带参数创建"><a href="#带参数创建" class="headerlink" title="带参数创建"></a>带参数创建</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER //</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE GetUserInfo(</span><br><span class="line">    IN userId INT,</span><br><span class="line">    OUT userName VARCHAR(255),</span><br><span class="line">    OUT userEmail VARCHAR(255)</span><br><span class="line">)</span><br><span class="line">BEGIN</span><br><span class="line">    SELECT name, email</span><br><span class="line">    INTO userName, userEmail</span><br><span class="line">    FROM users</span><br><span class="line">    WHERE id = userId;</span><br><span class="line">END //</span><br><span class="line"></span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line">in:传入存储过程 入参</span><br><span class="line">out:传出存储过程</span><br><span class="line">into 保存至特定的变量</span><br><span class="line"></span><br><span class="line">call(250,</span><br><span class="line">@userName,</span><br><span class="line">@userEmail</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">select @userName</span><br></pre></td></tr></table></figure><h5 id="建立智能存储过程"><a href="#建立智能存储过程" class="headerlink" title="建立智能存储过程"></a>建立智能存储过程</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER //</span><br><span class="line"></span><br><span class="line">CREATE PROCEDURE ApplyOrderDiscount(</span><br><span class="line">    IN orderId INT</span><br><span class="line">)</span><br><span class="line">BEGIN</span><br><span class="line">    DECLARE orderAmount DECIMAL(10, 2);  //定义了两个局部变量</span><br><span class="line">    DECLARE discountAmount DECIMAL(10, 2); </span><br><span class="line"></span><br><span class="line">    -- 获取订单金额</span><br><span class="line">    SELECT order_amount INTO orderAmount</span><br><span class="line">    FROM orders</span><br><span class="line">    WHERE order_id = orderId;</span><br><span class="line"></span><br><span class="line">    -- 根据订单金额应用折扣</span><br><span class="line">    IF orderAmount &gt;= 1000 THEN</span><br><span class="line">        SET discountAmount = orderAmount * 0.1; -- 10% 折扣</span><br><span class="line">    ELSEIF orderAmount &gt;= 500 THEN</span><br><span class="line">        SET discountAmount = orderAmount * 0.05; -- 5% 折扣</span><br><span class="line">    ELSE</span><br><span class="line">        SET discountAmount = 0; -- 无折扣</span><br><span class="line">    END IF;</span><br><span class="line"></span><br><span class="line">    -- 更新订单表</span><br><span class="line">    UPDATE orders</span><br><span class="line">    SET order_amount = orderAmount - discountAmount,</span><br><span class="line">        discount_applied = 1</span><br><span class="line">    WHERE order_id = orderId;</span><br><span class="line"></span><br><span class="line">    -- 返回折扣金额 (可选)</span><br><span class="line">    SELECT discountAmount;</span><br><span class="line"></span><br><span class="line">END //</span><br><span class="line"></span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure><h3 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h3><ul><li>游标时存储在MySQL服务器上的数据库查询，他并不是一条select语句，而是被该语句检索出来的结果集</li><li><strong>MYSQL游标只能用于存储过程</strong></li></ul><h4 id="使用游标"><a href="#使用游标" class="headerlink" title="使用游标"></a>使用游标</h4><h5 id="创建游标"><a href="#创建游标" class="headerlink" title="创建游标"></a>创建游标</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create procedure processorder()</span><br><span class="line">begin </span><br><span class="line">declare ordernaumbers CURSOR</span><br><span class="line">for</span><br><span class="line">select order_num from orders</span><br><span class="line">end;</span><br></pre></td></tr></table></figure><h5 id="打开于关闭游标"><a href="#打开于关闭游标" class="headerlink" title="打开于关闭游标"></a>打开于关闭游标</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">open ordernumbers;</span><br><span class="line">close ordernumbers</span><br></pre></td></tr></table></figure><h5 id="使用游标数据"><a href="#使用游标数据" class="headerlink" title="使用游标数据"></a>使用游标数据</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fetch 语句用来分别访问游标的每一行</span><br><span class="line"></span><br><span class="line">declare local variables</span><br><span class="line">declare o int;</span><br><span class="line">declare ordernaumbers CURSOR</span><br><span class="line">for</span><br><span class="line">select order_num from orders</span><br><span class="line">open ordernaumbers</span><br><span class="line">fetch ordernaumbers into o //从第一行开始到一个名为o的局部变量中</span><br></pre></td></tr></table></figure><h5 id="更为复杂的游标数据"><a href="#更为复杂的游标数据" class="headerlink" title="更为复杂的游标数据"></a>更为复杂的游标数据</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">declare done boolean default 0;</span><br><span class="line">declare o int;</span><br><span class="line"></span><br><span class="line">declare ordernumbers cursor</span><br><span class="line">for </span><br><span class="line">select order_num from orders;</span><br><span class="line"></span><br><span class="line">declare continue handler for SQLSTATE &#x27;02000&#x27; set done 1;</span><br><span class="line"></span><br><span class="line">open ordernumbers</span><br><span class="line">repeat</span><br><span class="line"> fetch ordernumbers into o;</span><br><span class="line">until done end repeat;</span><br><span class="line"></span><br><span class="line">close ordernumbers;</span><br><span class="line"></span><br><span class="line">end;</span><br></pre></td></tr></table></figure><h3 id="使用触发器"><a href="#使用触发器" class="headerlink" title="使用触发器"></a>使用触发器</h3><ul><li>触发器时MySQl响应以下语句而自动执行的一条MySQL语句<ul><li>insert</li><li>delete</li><li>update</li></ul></li></ul><h4 id="创建触发器"><a href="#创建触发器" class="headerlink" title="创建触发器"></a>创建触发器</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.触发器名称</span><br><span class="line">2.关联的表</span><br><span class="line">3.响应的活动</span><br><span class="line">4.触发器何时执行</span><br></pre></td></tr></table></figure><h4 id="删除触发器"><a href="#删除触发器" class="headerlink" title="删除触发器"></a>删除触发器</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop trigger newsxx;</span><br></pre></td></tr></table></figure><h4 id="使用触发器-1"><a href="#使用触发器-1" class="headerlink" title="使用触发器"></a>使用触发器</h4><h5 id="insert触发器"><a href="#insert触发器" class="headerlink" title="insert触发器"></a>insert触发器</h5><ul><li>引用<code>new</code>虚拟表，访问被插入的行</li><li>在before触发器中，new中的值也可以被更新</li><li>对于auto_inrement列，new在执行前包含0，在执行后包含自动生成的值<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create trigger neworder after insert on orders</span><br><span class="line">for each row select NEW.order_num</span><br></pre></td></tr></table></figure></li></ul><h5 id="delete触发器"><a href="#delete触发器" class="headerlink" title="delete触发器"></a>delete触发器</h5><ul><li>引用一个名为<code>old</code>的虚拟表，访问被删除的行</li><li><code>old</code>中的值全部是只读的，不能更新</li></ul><h5 id="update触发器"><a href="#update触发器" class="headerlink" title="update触发器"></a>update触发器</h5><ul><li>在update触发器中，你可以引用一个<code>old</code>虚拟表访问以前的值，引用一个名为<code>new</code>的虚拟表访问新更新的值。</li><li><code>old</code>中的值全部是只读的，不能更新</li></ul><h3 id="事物处理"><a href="#事物处理" class="headerlink" title="事物处理"></a>事物处理</h3><h4 id="事物处理概要"><a href="#事物处理概要" class="headerlink" title="事物处理概要"></a>事物处理概要</h4><ul><li>事物处理可以用来维护数据库的完整性，它保证成批的MySQL指令要不完全执行，要不完全不执行。</li><li>常用术语：<ul><li>事务</li><li>回退</li><li>提交</li><li>保留点</li></ul></li></ul><h4 id="控制事物处理"><a href="#控制事物处理" class="headerlink" title="控制事物处理"></a>控制事物处理</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start transaction</span><br></pre></td></tr></table></figure><h5 id="使用rollback来回退指令"><a href="#使用rollback来回退指令" class="headerlink" title="使用rollback来回退指令"></a>使用rollback来回退指令</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">start transaction</span><br><span class="line"></span><br><span class="line">rollback;</span><br></pre></td></tr></table></figure><ul><li>事物处理用来管理insert,updata,delete语句</li></ul><h5 id="使用commit进行显示提交"><a href="#使用commit进行显示提交" class="headerlink" title="使用commit进行显示提交"></a>使用commit进行显示提交</h5><ul><li>一般的MySQl语句都是直接针对数据库执行和编写的，提交操作是自动进行的。</li><li>在事物处理板块，为了进行明确的提交，需要使用commit语句</li></ul><h5 id="使用保留点"><a href="#使用保留点" class="headerlink" title="使用保留点"></a>使用保留点</h5><ul><li>为了支回退部分的事物处理，必须能在事物处理块中合适的位置放置占位符<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">savepoint delete1;</span><br><span class="line">rollback to dalete;</span><br></pre></td></tr></table></figure></li><li>释放保留点：保留点在事物处理完成后自动释放</li></ul><h5 id="更改默认行为"><a href="#更改默认行为" class="headerlink" title="更改默认行为"></a>更改默认行为</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set autocommit=0; 不自动提交更改</span><br></pre></td></tr></table></figure><ul><li>autocommit标志决定是否自动提交更改</li></ul><h3 id="全球化于本地化"><a href="#全球化于本地化" class="headerlink" title="全球化于本地化"></a>全球化于本地化</h3><h4 id="字符集与校对顺序"><a href="#字符集与校对顺序" class="headerlink" title="字符集与校对顺序"></a>字符集与校对顺序</h4><ul><li>字符集：字母与字符的集合·</li><li>编码：某个字符集成员的内部指令</li><li>校对：规定字符如何比较的指令</li></ul><h4 id="使用字符集与校对顺序"><a href="#使用字符集与校对顺序" class="headerlink" title="使用字符集与校对顺序"></a>使用字符集与校对顺序</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show character set</span><br><span class="line">show collation</span><br></pre></td></tr></table></figure><h3 id="安全管理"><a href="#安全管理" class="headerlink" title="安全管理"></a>安全管理</h3><h4 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h4><h4 id="管理用户"><a href="#管理用户" class="headerlink" title="管理用户"></a>管理用户</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use mysql</span><br><span class="line">select user from user</span><br></pre></td></tr></table></figure><ul><li>获取所有的用户账号列表</li></ul><h4 id="创建用户账号"><a href="#创建用户账号" class="headerlink" title="创建用户账号"></a>创建用户账号</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create user name identified by &#x27;zx &#x27; </span><br><span class="line"></span><br><span class="line">set password for name = Password(&#x27;xxxx&#x27;) //修改用户口令</span><br></pre></td></tr></table></figure><h4 id="设置访问权限"><a href="#设置访问权限" class="headerlink" title="设置访问权限"></a>设置访问权限</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show grants for xxx;</span><br><span class="line">grant select on database.* to name;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> DataBase </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>刘邦大传</title>
      <link href="/2024/11/07/%E5%88%98%E9%82%A6%E5%A4%A7%E4%BC%A0/"/>
      <url>/2024/11/07/%E5%88%98%E9%82%A6%E5%A4%A7%E4%BC%A0/</url>
      
        <content type="html"><![CDATA[<h4 id="观刘邦大传有所感的句子"><a href="#观刘邦大传有所感的句子" class="headerlink" title="观刘邦大传有所感的句子"></a>观刘邦大传有所感的句子</h4><ul><li><p>柔弱生之徒，老式戒刚强</p></li><li><p>天地不仁，以万物为刍狗；圣人不仁，以百姓为刍狗</p></li><li><p>失败的痛苦对我们对我们虽然最有用处，但往往是最容易被忘掉的；成功的骄傲最容易误导我们日后的行为，却也是最不容易抛弃的一部分。</p></li><li><p>攻击自己的勇气，是赢家最好的防守策略</p></li><li><p>不刻意去追求成功，没有包袱，没有私欲，只有努力，不断努力去解决周边的困难，努力到不必可以用心去努力的程度，便也是最容易成功的时候。真正的成功者，大多是冒险家，或许他们审慎小心，但多半是没有任何包袱压力的。身段太多，顾前顾后，刻意去追求成功的人，反而很少真正的成功</p></li><li><p>要笨到不会在乎会得到什么结果，要狂到肯把自己的一切全投入到工作中，要天真到不想一个人独享成果，要懒散到有一大推人替你工作</p></li><li><p>最上等的领导者无为而治，人们只知道有国君，而不感觉到其势力，各顺其性，各安起身。一切都制度化，每个人遵循运作模式，各自负责其工作，达成其任务。</p></li><li><p>真正的政治领袖，会努力建立制度化的常模，不喊口号，也不可以呼吁民众效忠，时机不成熟，绝不发号施令。有耐心地维持住常态的努力工作，让一切顺理成章的达成其目标，人民感受不出领导者的手段，只认为一切本应该如此</p></li><li><p>守弱—知道自己的孱弱，而能够接纳这种弱势，坚强地忍耐弱者的地位，才能累积实力。是自己慢慢脱离弱者的不利地位</p></li><li><p>人的需要真实非常有限，知识欲望确实无穷的，过分追求欲望而不能节制，结果经常不能满足，反而更加痛苦，而无法掌控自我的意志</p></li><li><p>人类最大的敌人是自己，最不容战胜的对手是自己，但事实上，人类唯一能影响，去改变的也是自己</p></li><li><p>不要像美玉一样地摧残而为人尊崇，而要像坚石一样黯淡而为人贱视，一切都合乎道，不用特别造作，使天地万物趋向于自然</p></li><li><p>欲取天下者，应顺应自然之势，不应过分着重人为的努力。若有人想以一己之力来统治天下，这是绝对做不到的</p></li><li><p>一切顺其自然，堵塞意念，关闭情欲，收敛锋芒，消除丰饶于未然，不表示自己的特异，与光则和，遇尘则同</p></li><li><p>当我们用别人的眼光来评判自己，确定自己的价值，这便是输赢心态的开始，输赢让我们紧张，焦虑，让我们的思想被封闭了，为了他人的评价而活，拼命压抑自己的感觉。不能去除输赢的心态，便无法共赢，不能体认与接纳自己的感觉，我们便无法克服输赢的焦虑</p></li><li><p>靠赢家赢的那批人，往往更输不起，他们会迫使赢家继续去赢</p></li><li><p>狡兔死，走狗烹，飞鸟尽，良弓藏，敌国破，良臣灭</p></li><li><p>虏中吾指</p></li><li><p>吾以布衣提三尺剑取天下，此非天命乎？命乃在天，虽扁鹊何益！</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 读后感 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>foo1s的第一篇博客</title>
      <link href="/2024/11/06/foo1s%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/"/>
      <url>/2024/11/06/foo1s%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="foo1s的第一篇博客"><a href="#foo1s的第一篇博客" class="headerlink" title="foo1s的第一篇博客"></a>foo1s的第一篇博客</h1><h2 id="1-博客的创建"><a href="#1-博客的创建" class="headerlink" title="1.博客的创建"></a>1.博客的创建</h2><h3 id="1-1-博客的创建"><a href="#1-1-博客的创建" class="headerlink" title="1.1.博客的创建"></a>1.1.博客的创建</h3><h4 id="1-1-1-博客的创建"><a href="#1-1-1-博客的创建" class="headerlink" title="1.1.1.博客的创建"></a>1.1.1.博客的创建</h4><h5 id="1-1-1-1-博客的创建"><a href="#1-1-1-1-博客的创建" class="headerlink" title="1.1.1.1.博客的创建"></a>1.1.1.1.博客的创建</h5><h6 id="1-1-1-1-1-博客的创建"><a href="#1-1-1-1-1-博客的创建" class="headerlink" title="1.1.1.1.1.博客的创建"></a>1.1.1.1.1.博客的创建</h6><h3 id="1-2-博客的创建"><a href="#1-2-博客的创建" class="headerlink" title="1.2.博客的创建"></a>1.2.博客的创建</h3><h4 id="1-2-1-博客的创建"><a href="#1-2-1-博客的创建" class="headerlink" title="1.2.1.博客的创建"></a>1.2.1.博客的创建</h4><h5 id="1-2-1-1-博客的创建"><a href="#1-2-1-1-博客的创建" class="headerlink" title="1.2.1.1.博客的创建"></a>1.2.1.1.博客的创建</h5><h6 id="1-2-1-1-1-博客的创建"><a href="#1-2-1-1-1-博客的创建" class="headerlink" title="1.2.1.1.1.博客的创建"></a>1.2.1.1.1.博客的创建</h6>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/11/06/hello-world/"/>
      <url>/2024/11/06/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
